title: prosEO UI Command Line Interface Syntax
# This document describes the syntax of the prosEO Command Line Interface. It is inteded to be fed into the syntax parser of the
# command line program and to be returned as online help for the user.
version: v0.1
description: |
  Commands can be invoked on the shell command line following the name of the prosEO executable (e. g. "proseo")
  and at least one whitespace character.
  
  Commands may have subcommands, which precede all options and parameters.
  
  Commands may have options (--option, a short form -o may be given as alias) and parameters
  (passed as values without the parameter name).
  
  Modal options can be combined into one option, i. e. "-a -b -c" is the same as "-abc".
  Options with values are either of the form "-ovalue" or "--option=value";
  in the case of multiple values "--option=value,value,value".
  
  Parameters are positional, except (implicitly) for attribute parameters of the form "<attribute name>=<attribute value>".
  Attribute values may be comma-separated string lists, but they cannot represent attributes of more complex types. To set
  complex object attributes use the "--file" option and pass a Json, XML or Yaml file.
  
  All date-time values must conform to the ISO date-time format ("YYYY-MM-DDTHH:MM:SS").
  
  So the general syntax is:
  ["proseo"] command [subcommand...] [option...] [parameter...]

globalOptions:
    - name: help
      type: boolean
      description: Show help information for the current command level (top level commands, when called from the shell command line)
      shortForm: h

options:
    - name: version
      type: boolean
      description: Show the prosEO CLI version and exit (only for call from shell command line)
      shortForm: v
    - name: user
      type: string
      description: The user name for login to prosEO. If a command is given upon program invocation, but no username,
                   login is attempted using the default user name and password stored in the application configuration file.
      shortForm: u
    - name: password
      type: string
      description: The password for login to prosEO (only valid if a user name for login is given. If a user name is given,
                   but no password, an interactive password prompt will occur.
      shortForm: p
    - name: mission
      type: string
      description: The mission to login to (only valid if a user name for login is given)
      shortForm: m

commands:
    # Terminate the CLI
    - name: exit
      description: Terminate the Command Line Interface
      
    # Show the help text (same as "proseo --help")
    - name: help
      description: Show the prosEO Command Line Interface help information (this page; for subcommand help, type "<subcommand> --help")
      
    # Authentication:
    - name: login
      description: Log in to a mission in prosEO. A login is required prior to executing any other command except "mission show".
      options:
        - name: user
          type: string
          description: User name
          shortForm: u
        - name: password
          type: string
          description: The user's password
          shortForm: p
      parameters:
        - name: missionCode
          type: string
          description: The code of the mission to log in to
    - name: logout
      description: Log out of prosEO. No commands except "mission show" and "login" will be accepted after logout.
    
    # Order manager commands:
    - name: mission
      description: Commands related to configuring an earth observation mission
      subcommands:
        - name: show
          description: List all configured missions or only the given one
          options:
            - name: format
              type: string
              description: The output format (one of { JSON, XML, YAML }; default value YAML [human readable])
          parameters:
            - name: missionCode
              type: string
              optional: true
              description: The code of the mission to list
        - name: update
          description: Update the mission attributes; if the input is not from a file,
                       the user will be prompted for mandatory attributes not given on the command line
          options:
            - name: file
              type: string
              description: Path to file to read the updated mission definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
          parameters:
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: A mission attribute to update in the form "<attribute name>=<attribute value>",
                           overrides values given in the mission definition file
        - name: spacecraft
          description: Commands to manage the spacecrafts for a mission
          subcommands:
            - name: add
              description: Add a spacecraft to the mission list of spacecrafts; 
                           the user will be prompted for mandatory attributes not given on the command line
              options:
                - name: file
                  type: string
                  description: Path to file to read the updated mission definition from
                  shortForm: f
                - name: format
                  type: string
                  description: The file format (one of { JSON, XML, YAML }; default value JSON)
              parameters:
                - name: spacecraftCode
                  type: string
                  optional: true
                  description: The code of the spacecraft to remove (mandatory if not read from file)
                - name: attribute
                  type: string
                  optional: true
                  repeatable: true
                  description: A spacecraft attribute to set in the form "<attribute name>=<attribute value>"
            - name: remove
              description: Remove a spacecraft from the mission list of spacecrafts
              parameters:
                - name: spacecraftCode
                  type: string
                  description: The code of the spacecraft to remove
    - name: orbit
      description: Commands for managing orbits for a given spacecraft
      subcommands:
        - name: show
          description: Lists orbits, optionally restricted to a given orbit range
          options:
            - name: from
              type: integer
              description: Lower bound of orbit range
            - name: to
              type: integer
              description: Upper bound of orbit range
            - name: format
              type: string
              description: The output format (one of { JSON, XML, YAML }; default value YAML [human readable])
          parameters:
            - name: spacecraftCode
              type: string
              description: The code of the spacecraft the orbits belong to
        - name: create
          description: Add a set of orbits for the given spacecraft
          options:
            - name: file
              type: string
              description: Path to file to read the orbit definitions from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
          parameters:
            - name: spacecraftCode
              type: string
              optional: true
              description: The code of the spacecraft the orbits belong to (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: An orbit attribute to update in the form "<attribute name>=<attribute value>",
                           only allowed if no orbit file is given (i. e. a single orbit is created)
        - name: update
          description: Update a set of orbits for the given spacecraft
          options:
            - name: file
              type: string
              description: Path to file to read the orbit definitions from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
          parameters:
            - name: spacecraftCode
              type: string
              optional: true
              description: The code of the spacecraft the orbits belong to (mandatory if not read from file)
            - name: orbitNumber
              type: string
              optional: true
              description: The number of the orbit to update (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: An orbit attribute to update in the form "<attribute name>=<attribute value>",
                           only allowed if no orbit file is given (i. e. a single orbit is updated)
        - name: delete
          description: Deletes orbits in a given orbit range
          options:
            - name: from
              type: integer
              description: Lower bound of orbit range
            - name: to
              type: integer
              description: Upper bound of orbit range
          parameters:
            - name: spacecraftCode
              type: string
              description: The code of the spacecraft the orbits belong to
    - name: order
      description: Commands for managing processing orders
      subcommands:
        - name: show
          description: Lists orders, optionally restricted to a given time range or a specific processing order
          options:
            - name: from
              type: datetime
              description: Lower bound of order start time
            - name: to
              type: datetime
              description: Upper bound of order start time
            - name: format
              type: string
              description: The output format (one of { JSON, XML, YAML }; default value YAML [human readable])
          parameters:
            - name: orderId
              type: string
              optional: true
              description: The order identifier (overrides --from and --to options)
        - name: create
          description: Create a new processing order; if the input is not from a file,
                       the user will be prompted for mandatory attributes not given on the command line
          options:
            - name: file
              type: string
              description: Path to file to read the order definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
          parameters:
            - name: orderId
              type: string
              optional: true
              description: The order identifier for user reference (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: An order attribute to update in the form "<attribute name>=<attribute value>",
                           overrides values given in the order definition file
        - name: update
          description: Update a processing order (only allowed in status initial)
          options:
            - name: file
              type: string
              description: Path to file to read the order definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
            - name: delete-attributes
              type: boolean
              description: Delete attributes not given in the order definition file and/or the command parameters
          parameters:
            - name: orderId
              type: string
              optional: true
              description: The order identifier for user reference (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: An order attribute to update in the form "<attribute name>=<attribute value>",
                           overrides values given in the order definition file
        - name: delete
          description: Delete the named processing order (only allowed in status closed)
          parameters:
            - name: orderId
              type: string
              description: The order identifier
        - name: approve
          description: Approve the named processing order for planning (must be in status initial)
          parameters:
            - name: orderId
              type: string
              description: The order identifier
        - name: plan
          description: Plan the jobs for the named processing order (must be in status approved)
          options:
            - name: format
              type: string
              description: The output format for the resulting job list (one of { NONE, JSON, XML, YAML }; default value NONE)
          parameters:
            - name: orderId
              type: string
              description: The order identifier
            - name: facility
              type: string
              description: The processing facility, on which the order shall be run
        - name: release
          description: Release the jobs of the named processing order for processing (must be in status planned)
          parameters:
            - name: orderId
              type: string
              description: The order identifier
        - name: suspend
          description: Suspend starting of further jobs for the named processing order (order reverts to status planned)
          parameters:
            - name: orderId
              type: string
              description: The order identifier
        - name: resume
          description: Resume starting of jobs for the named processing order after suspend
          parameters:
            - name: orderId
              type: string
              description: The order identifier
        - name: cancel
          description: Cancel the named processing order (remaining jobs are not executed, order state changes to failed;
              order must be in status planned, i. e. not yet released or suspended)
          parameters:
            - name: orderId
              type: string
              description: The order identifier
        - name: close
          description: Close the named processing order (if it is completed or failed)
          parameters:
            - name: orderId
              type: string
              description: The order identifier
        - name: reset
          description: Reset the named processing order to initial state (if it is approved or planned)
          parameters:
            - name: orderId
              type: string
              description: The order identifier

    # Commands for the Processor Manager
    - name: processor
      description: Commands for managing processor classes, processors, configurations and configured processors
      subcommands:
        - name: class
          description: Commands for managing processor classes
          subcommands:
            - name: show
              description: Show all processor classes for the current mission or a named one
              options:
                - name: format
                  type: string
                  description: The output format (one of { JSON, XML, YAML }; default value YAML [human readable])
              parameters:
                - name: className
                  type: string
                  optional: true
                  description: The name of the processor classes to show
            - name: create
              description: Create a new processor class for the current mission; 
                           the user will be prompted for mandatory attributes not given on the command line
              options:
                - name: file
                  type: string
                  description: Path to file to read the processor class definition from
                  shortForm: f
                - name: format
                  type: string
                  description: The file format (one of { JSON, XML, YAML }; default value JSON)
              parameters:
                - name: className
                  type: string
                  optional: true
                  description: The name of the processor class to create (mandatory if not read from file)
                - name: attribute
                  type: string
                  optional: true
                  repeatable: true
                  description: A processor class attribute to set in the form "<attribute name>=<attribute value>"
            - name: update
              description: Update a processor class for the current mission; 
                           the user will be prompted for mandatory attributes not given on the command line
              options:
                - name: file
                  type: string
                  description: Path to file to read the processor class definition from
                  shortForm: f
                - name: format
                  type: string
                  description: The file format (one of { JSON, XML, YAML }; default value JSON)
              parameters:
                - name: className
                  type: string
                  optional: true
                  description: The name of the processor classes to update (mandatory if not read from file)
                - name: attribute
                  type: string
                  optional: true
                  repeatable: true
                  description: A processor class attribute to set in the form "<attribute name>=<attribute value>"
            - name: delete
              description: Remove the named processor class from the current mission
              parameters:
                - name: className
                  type: string
                  description: The name of the processor classes to update (mandatory if not read from file)
        - name: show
          description: Show all processor versions for the current mission or only the selected ones
          options:
            - name: format
              type: string
              description: The output format (one of { JSON, XML, YAML }; default value YAML [human readable])
          parameters:
            - name: className
              type: string
              optional: true
              description: The class name of the processor to show
            - name: processorVersion
              type: string
              optional: true
              description: The version of the processor to show
        - name: create
          description: Create a new processor version for the current mission; 
                       the user will be prompted for mandatory attributes not given on the command line
          options:
            - name: file
              type: string
              description: Path to file to read the processor version definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
          parameters:
            - name: className
              type: string
              optional: true
              description: The class name of the processor to create (mandatory if not read from file)
            - name: processorVersion
              type: string
              optional: true
              description: The version of the processor to create (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: A processor attribute to set in the form "<attribute name>=<attribute value>"
        - name: update
          description: Update a processor version for the current mission; 
                       the user will be prompted for mandatory attributes not given on the command line
          options:
            - name: file
              type: string
              description: Path to file to read the processor version definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
            - name: delete-attributes
              type: boolean
              description: Delete attributes not given in the order definition file and/or the command parameters
          parameters:
            - name: className
              type: string
              optional: true
              description: The class name of the processor to update (mandatory if not read from file)
            - name: processorVersion
              type: string
              optional: true
              description: The version of the processor to update (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: A processor attribute to set in the form "<attribute name>=<attribute value>"
        - name: delete
          description: Delete a processor version from the current mission
          parameters:
            - name: className
              type: string
              description: The class name of the processor to delete
            - name: processorVersion
              type: string
              description: The version of the processor to delete
        - name: configuration
          description: Commands to manage configured processors
          subcommands:
            - name: show
              description: Show all configured processor for the current mission or only the ones identified
              options:
                - name: format
                  type: string
                  description: The output format (one of { JSON, XML, YAML }; default value YAML [human readable])
              parameters:
                - name: className
                  type: string
                  optional: true
                  description: The class name of the processor
                - name: configuredProcessorIdentifier
                  type: string
                  optional: true
                  description: The identifier of the configured processor
            - name: create
              description: Create a new configured processor by combining a processor version and a configuration; 
                           the user will be prompted for mandatory attributes not given on the command line
              options:
                - name: file
                  type: string
                  description: Path to file to read the configured processor definition from
                  shortForm: f
                - name: format
                  type: string
                  description: The file format (one of { JSON, XML, YAML }; default value JSON)
              parameters:
                - name: configuredProcessorIdentifier
                  type: string
                  optional: true
                  description: The identifier of the configured processor
                - name: className
                  type: string
                  optional: true
                  description: The class name of the processor (mandatory if not read from file)
                - name: processorVersion
                  type: string
                  optional: true
                  description: The version of the processor (mandatory if not read from file)
                - name: configurationVersion
                  type: string
                  optional: true
                  description: The version of the configuration (mandatory if not read from file)
                - name: attribute
                  type: string
                  optional: true
                  repeatable: true
                  description: A configured processor attribute to set in the form "<attribute name>=<attribute value>"
            - name: update
              description: Update a configured processor; 
                           the user will be prompted for mandatory attributes not given on the command line
              options:
                - name: file
                  type: string
                  description: Path to file to read the configured processor definition from
                  shortForm: f
                - name: format
                  type: string
                  description: The file format (one of { JSON, XML, YAML }; default value JSON)
              parameters:
                - name: className
                  type: string
                  optional: true
                  description: The class name of the processor (mandatory if not read from file)
                - name: configuredProcessorIdentifier
                  type: string
                  optional: true
                  description: The identifier of the configured processor
                - name: attribute
                  type: string
                  optional: true
                  repeatable: true
                  description: A configured processor attribute to set in the form "<attribute name>=<attribute value>"
            - name: delete
              description: Delete a configured processor
              parameters:
                - name: className
                  type: string
                  description: The class name of the processor
                - name: configuredProcessorIdentifier
                  type: string
                  optional: true
                  description: The identifier of the configured processor
    - name: configuration
      description: Commands for managing configurations
      subcommands:
        - name: show
          description: Show all configurations for the current mission and processor class or a named one
          options:
            - name: format
              type: string
              description: The output format (one of { JSON, XML, YAML }; default value YAML [human readable])
          parameters:
            - name: className
              type: string
              optional: true
              description: The name of the processor classes for the configurations
            - name: configurationVersion
              type: string
              optional: true
              description: The configuration versions to show
        - name: create
          description: Create a new configuration for the current mission and processor class; 
                       the user will be prompted for mandatory attributes not given on the command line
          options:
            - name: file
              type: string
              description: Path to file to read the configuration definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
          parameters:
            - name: className
              type: string
              optional: true
              description: The name of the processor class (mandatory if not read from file)
            - name: configurationVersion
              type: string
              optional: true
              description: The version of the configuration to create (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: A configuration attribute to set in the form "<attribute name>=<attribute value>"
        - name: update
          description: Update a configuration for the current mission and processor class; 
                       the user will be prompted for mandatory attributes not given on the command line
          options:
            - name: file
              type: string
              description: Path to file to read the configuration definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
            - name: delete-attributes
              type: boolean
              description: Delete attributes not given in the order definition file and/or the command parameters
          parameters:
            - name: className
              type: string
              optional: true
              description: The name of the processor class (mandatory if not read from file)
            - name: configurationVersion
              type: string
              optional: true
              description: The version of the configuration to update (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: A configuration attribute to set in the form "<attribute name>=<attribute value>"
        - name: delete
          description: Remove a configuration from the current mission and processor class
          parameters:
            - name: className
              type: string
              description: The name of the processor classes to update (mandatory if not read from file)
            - name: configurationVersion
              type: string
              description: The version of the configuration to update (mandatory if not read from file)
                 
    # Commands for the Product Class Manager
    - name: productclass
      description: Commands for managing product classes
      subcommands:
        - name: show
          description: Show all product classes for the current mission or only the selected ones
          options:
            - name: format
              type: string
              description: The output format (one of { JSON, XML, YAML }; default value YAML [human readable])
          parameters:
            - name: className
              type: string
              optional: true
              description: The name of the product class to show
        - name: create
          description: Create a new product class for the current mission; 
                       the user will be prompted for mandatory attributes not given on the command line
          options:
            - name: file
              type: string
              description: Path to file to read the product class definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
          parameters:
            - name: className
              type: string
              optional: true
              description: The name of the product class name to create (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: A product class attribute to set in the form "<attribute name>=<attribute value>"
        - name: update
          description: Update a product class for the current mission; 
                       the user will be prompted for mandatory attributes not given on the command line
          options:
            - name: file
              type: string
              description: Path to file to read the product class definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
            - name: delete-attributes
              type: boolean
              description: Delete attributes not given in the order definition file and/or the command parameters
          parameters:
            - name: className
              type: string
              optional: true
              description: The name of the product class name to update (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: A product class attribute to set in the form "<attribute name>=<attribute value>"
        - name: delete
          description: Delete the named product class from the current mission
          parameters:
            - name: className
              type: string
              description: The name of the product class to delete
        - name: rule
          description: Commands for managing selection rules
          subcommands:
            - name: show
              description: Show all selection rules for the current mission and target product class
              parameters:
                - name: targetClassName
                  type: string
                  optional: true
                  description: The product class name of the selection rules
            - name: create
              description: Create a new selection rule for the given target product class; 
                           the user will be prompted for mandatory attributes not given on the command line
              options:
                - name: file
                  type: string
                  description: Path to file to read the selection rule definition from
                  shortForm: f
                - name: format
                  type: string
                  description: The file format (one of { JSON, XML, YAML }; default value JSON)
              parameters:
                - name: targetClassName
                  type: string
                  optional: true
                  description: The target product class name (mandatory if not read from file)
                - name: attribute
                  type: string
                  optional: true
                  repeatable: true
                  description: A selection rule attribute to set in the form "<attribute name>=<attribute value>"
            - name: update
              description: Update a selection rule for the given target product class; 
                           the user will be prompted for mandatory attributes not given on the command line
              options:
                - name: file
                  type: string
                  description: Path to file to read the selection rule definition from
                  shortForm: f
                - name: format
                  type: string
                  description: The file format (one of { JSON, XML, YAML }; default value JSON)
              parameters:
                - name: targetClassName
                  type: string
                  optional: true
                  description: The target product class name (mandatory if not read from file)
                - name: attribute
                  type: string
                  optional: true
                  repeatable: true
                  description: A selection rule attribute to set in the form "<attribute name>=<attribute value>"
            - name: delete
              description: Delete the selection rule for the given target class and configured processor (the selection 
                           rule will be disconnected from the configured processor and deleted, if it is not connected
                           to any other configured processor)
              parameters:
                - name: targetClassName
                  type: string
                  optional: true
                  description: The product class name of the selection rule
                - name: configuredProcessorIdentifier
                  type: string
                  optional: true
                  description: The identifier of the configured processor the selection rule is valid for
                    
    # Commands for the Product Ingestor
    - name: product
      description: Commands for managing products
      subcommands:
        - name: show
          description: Show products for a mission and product class, optionally restricted to a given time range
          options:
            - name: from
              type: datetime
              description: Lower bound of sensing start time
            - name: to
              type: datetime
              description: Upper bound of sensing start time
            - name: format
              type: string
              description: The output format (one of { JSON, XML, YAML }; default value YAML [human readable])
          parameters:
            - name: className
              type: string
              repeatable: true
              description: The name of the product class to show
        - name: create
          description: Create a new product for the current mission and product class; 
                       the user will be prompted for mandatory attributes not given on the command line
          options:
            - name: file
              type: string
              description: Path to file to read the product definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
          parameters:
            - name: className
              type: string
              optional: true
              description: The class name of the product to create (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: A product attribute to set in the form "<attribute name>=<attribute value>"
        - name: update
          description: Update a product for the current mission and product class; 
                       the user will be prompted for mandatory attributes not given on the command line
          options:
            - name: file
              type: string
              description: Path to file to read the product definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
            - name: delete-attributes
              type: boolean
              description: Delete attributes not given in the product definition file and/or the command parameters
          parameters:
            - name: id
              type: integer
              optional: true
              description: The database ID of the product to update (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: A product attribute to set in the form "<attribute name>=<attribute value>"
        - name: delete
          description: Delete all products matching the given selection criteriy
          options:
            - name: file
              type: string
              description: Path to file to read the product definition from
              shortForm: f
            - name: format
              type: string
              description: The file format (one of { JSON, XML, YAML }; default value JSON)
          parameters:
            - name: id
              type: integer
              optional: true
              description: The database ID of the product to delete (mandatory if not read from file)
            - name: attribute
              type: string
              optional: true
              repeatable: true
              description: A product attribute to filter by in the form "<attribute name>=<attribute value>"
    - name: ingest
      description: Ingest all products into the storage manager of the given processing facility
      options:
        - name: file
          type: string
          description: Path to file to read the ingested products from (mandatory)
          shortForm: f
        - name: format
          type: string
          description: The file format (one of { JSON, XML, YAML }; default value JSON)
      parameters:
        - name: processingFacility
          type: string
          description: The name of the facility to ingest the products to
# TODO Add processing facilities!
          