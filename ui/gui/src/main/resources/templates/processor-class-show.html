<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>DLR Mission</title>
<!-- Bootstrap core CSS -->
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
	integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
	crossorigin="anonymous">

<!-- Custom styles for prosEO -->
<link href="../static/fragments/proseo.css"
	th:href="@{/fragments/proseo.css}" rel="stylesheet" type="text/css" />
</head>

<body>
  <nav
    class="navbar bg-light sticky-top flex-md-nowrap p-0 shadow navbar-expand-md">
    <div class="container-fluid pl-0 pr-0">
      <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" id="mission"
        href="/"><img src="proseo_logo.png" class="rounded" width="50"
        height="50"></a>
      <button class="navbar-toggler position-absolute d-md-none collapsed"
        type="button" data-toggle="collapse" data-target="#sidebarMenu"
        aria-controls="sidebarMenu" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <ul class="navbar-nav mr-auto navbar-left">
        <li class="p-breadcrumb-item"><a class="bread-link" href="/"><span
            th:text="${missioncode}">mission</span></a></li>
        <li class="p-breadcrumb-item" aria-current="page"><span
          th:text="#{processor-class-show}">show</span></li>
      </ul>
      <div th:replace="fragments/navbar.html :: navbarRight"></div>
    </div>
  </nav>


	<div class="container-fluid">
		<div class="row">
			<div th:insert="fragments/sidebar.html :: sidebarMenu"></div>

			<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
			<div class="container-fluid">
				<form name="prc-cls-shw" id="prc-cls-shw"
					action="/processor-class-show/get" method="get">
					<div class="input-group mb-3">
						<p class="text-left">
							<input type="text" th:value="${missioncode}"
								placeholder="Mission" class="form-control" name="missioncode"
								id="missioncode">
						</p>
					</div>
					<div class="input-group mb-3">
						<p class="text-left">
							<input type="text" th:value="${processorclassnamecode}"
								placeholder="Processor-Class Name" class="form-control"
								name="processorclassnamecode" id="processorclassnamecode">
						</p>
					</div>
					<div class="input-group mb-3">
						<button type="button" onclick="retrieveData();"
							class="btn btn-primary mb-2">Show Processor-Class</button>
					</div>
				</form>
			</div>

			<div class="container">
				<div id="content" name="content">
					<table class="table" id="processorTable" name="processorTable">
						<thead class="thead-dark">
							<tr>
								<th scope="col">ID</th>
								<th scope="col">version</th>
								<th scope="col">missionCode</th>
								<th scope="col">processorName</th>
								<th scope="col">productClasses</th>
							</tr>
						</thead>
						<tbody th:unless="${procs} == null">
							<tr th:each="processor : ${procs}">
								<td th:text="${processor?.id}"></td>
								<td th:text="${processor?.version}"></td>
								<td th:text="${processor?.missionCode}"></td>
								<td th:text="${processor?.processorName}"></td>
								<td th:text="${processor?.productClasses}"></td>
							</tr>
						</tbody>
					</table>
					<div th:if="${errormsg}">
						<div class="alert alert-danger alert-dismissible fade show"
							role="alert">
							<p th:text="${errormsg}"></p>
							<button type="button" class="close" data-dismiss="alert"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<p id="test" name="test">PARAM</p>
						<div th:fragment="resultLists"></div>
					</div>

				</div>
			</div>
			<div th:insert="fragments/footer.html :: footer"></div>
			</main>
		</div>
	</div>
</body>
<script src="https://code.jquery.com/jquery-3.5.1.js"
	integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
	integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
	crossorigin="anonymous"></script>
<script
	src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
	integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
	crossorigin="anonymous"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
<script src="../static/fragments/proseo.js"
	th:src="@{/fragments/proseo.js}" type="text/javascript"></script>

<script type="text/javascript">
	function retrieveData() {
	  var tableRows = $("processorTable").rows;
	  if(tableRows > 1 && tableRows != null) {
	  $("processorTable > tbody").empty();
	  }
	    var url = "/processor-class-show/get";
	    var prop = document.getElementById('test');
	    if ($("#missioncode").val() != "" && $("#processorclassnamecode").val() != "") {
	        url += "?mission=" + $("#missioncode").val() + "&processorclassName=" + $("#processorclassnamecode").val() ;
	    } else if ($("#missioncode").val() == "" && $("#processorclassnamecode").val() != "") {
	      url += "?processorclassName=" + $("#processorclassnamecode").val();
	    } else if($("#missioncode").val() != "" && $("#processorclassnamecode").val() == "") {
	      url += "?mission=" + $("#missioncode").val();
	    } else {
	      prop.innerHTML = "UNGÃœLTIGE EINGABE";
	      return;
	    }
	    
	    
	    $.ajax({
	    url: url,
	    method: "GET",
	    success: function (res) {
	        $("#content").html(res);
	    },
	    fail: function (err) {
	        console.log(err);
	        prop.innerHTML = "Fehler!" + err;
	    }

	});
	};
</script>
<script>
    window.onload = function () {
     // $('.collapse').collapse();
     var elem = document.getElementById('sb-processor-class');
     $(elem).addClass('active');
     feather.replace();
     retrieveData();
     
    }
</script>

</html>